GO和PHP共存  微服务架构 从PHP向GO迁移  目前四个组

主从数据不同步该怎么做？
1.主从配置不对导致同步失败 数据库版本等
2.主从都有写的问题，导致从库冲突
3.网络问题，导致延迟比较高，延迟高的时间段有没有慢sql或者索引或者数据量大的问题可以优化
  3.1 怎样查看慢sql https://www.cnblogs.com/qmfsun/p/4844472.html

给线上表加索引怎么做？
找到流浪低的时候直接做，会对DML有影响
升级sql版本：
备份一个新版本数据库同步数据，找到低流量时间直接切换（还是会有downtime，因为直接请求DB会有hostname需要切换
如果业务层和数据层之间有DB proxy，可以做到没有downtime和百分比流量切换

三色标记写屏障? 到GMP?
https://zhuanlan.zhihu.com/p/297177002
白色：未搜索的对象，在回收周期开始时所有对象都是白色，在回收周期结束时所有的白色都是垃圾对象
灰色：正在搜索的对象，但是对象身上还有一个或多个引用没有扫描
黑色：已搜索完的对象，所有的引用已经被扫描完
三色标记法属于增量式GC算法，回收器首先将所有的对象着色成白色，然后从GC Root出发，逐步把所有“可达”的对象变成灰色再到黑色，最终所有的白色对象即是“不可达”对象。

混合写屏障逻辑如下：
GC开始时将栈上所有对象标记为黑色，无须STW
GC期间在栈上创建的新对象均标记为黑色
将被删除的下游对象标记为灰色
将被添加的下游对象标记为灰色


防止内存泄漏? 比如close channel
https://gfw.go101.org/article/memory-leaking.html
s0 = s1[:50]
	// 目前，s0和s1共享着承载它们的字节序列的同一个内存块。
	// 虽然s1到这里已经不再被使用了，但是s0仍然在使用中，
	// 所以它们共享的内存块将不会被回收。虽然此内存块中
	// 只有50字节被真正使用，而其它字节却无法再被使用。
我们可以利用官方Go标准编译器对字符串衔接所做的优化来防止一次不必要的复制，代价是有一个字节的浪费。
	func f(s1 string) {
		s0 = (" " + s1[:50])[1:]
	}
slice[a:b:c] slice内容为 index a->b, cap为a->c

tcp比udp可靠的原因，除了滑动窗口？
https://www.jianshu.com/p/65605622234b
基于滑动窗口机制的出错重传和速度匹配
出现差错时，让发送方重传差错数据：即 出错重传
当接收方来不及接收收到的数据时，可通知发送方降低发送数据的效率：即 速度匹配
针对上述2个问题，分别采用的解决方案是：自动重传协议 和 流量控制 & 拥塞控制协议
https://mp.weixin.qq.com/s/e2waj6bmgfkgJzNBbE7i7g
1. 序列号和确认机制
2. 数据校验和
3. 滑动窗口机制
4. 重传机制
5. 拥塞控制

自动重传：S:发送窗口 R:接受窗口
1. 停等式ARQ（Stop-and-Wait） S = 1, R = 1
2. 后退N帧 S > 1, R = 1
3. 选择重传ARQ S > 1, R > 1 (类似于后退N帧，但重传的更多，有可能把确认的帧也重传)

速度匹配：
1. 流量控制：接收方根据自己接收方大小，动态调整发送窗口大小
2. 拥塞控制 （与流量控制区别是作用对象为整个通信网络，而不只是发送端
	2.1 拥塞窗口：根据网络拥塞情况调整发送窗口值
	2.2 试探网络拥塞情况，从小到大逐渐增大发送窗口值

ping IP 后序会发生什么，用的什么协议？
https://www.cnblogs.com/sinkHu/p/13532300.html
PING (Packet Internet Groper)发送ICMP(Internet Control Messages Protocol,因特网信报控制协议)；回声请求消息给目的地并报告是否收到所希望的ICMPecho （ICMP回声应答）

在1G的物理内存中生命4G大小slice可以吗，读可以吗，写可以吗？
可以声明，此时只是物理内存，读写都不可以
物理内存4G声明5G可以吗？
32位机器中1G内核空间3G用户空间，所以会失败 64位机器是可以的，即使实际物理内存不够，也只会在实际用的时候报错
https://mp.weixin.qq.com/s/e2waj6bmgfkgJzNBbE7i7g

逃逸分析：确定指针动态范围的方法---在哪些地方能访问到指针。
防止变量逃逸的好处：减少GC压力
什么时候回变量逃逸？
在某个函数中new或字面量创建出的变量，将其指针作为函数返回值，则该变量一定发生逃逸（构造函数返回的指针变量一定逃逸）；
被已经逃逸的变量引用的指针，一定发生逃逸；
被指针类型的slice、map和chan引用的指针，一定发生逃逸；

如何实时展示最热点的top10条呢？
https://zhuanlan.zhihu.com/p/341649963
