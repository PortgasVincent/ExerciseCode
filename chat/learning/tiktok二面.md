grpc 为什么快？
grpc用protobuf来做序列化，使得数据内容比较小，压缩和传输效率高
grpc使用HTTP 2.0来传输数据    https://zhuanlan.zhihu.com/p/43787334  /  https://www.jianshu.com/p/5e75b20a267f
1. 二进制帧:    HTTP/1.1的头信息是文本（ASCII编码），数据体可以是文本，也可以是二进制；HTTP/2 头信息和数据体都是二进制，统称为“帧”：头信息帧和数据帧。相比 HTTP/1.1 的纯文本数据，更小的传输体积，易于解析而且不易出错
2. 多路复用（双工通信）:    允许单一连接发起多重的请求-响应消息，即在一个连接里，客户端和浏览器都可以同时发送多个请求和响应，而不用按照顺序一一对应，这样避免了“队头堵塞”。HTTP/2 把 HTTP 协议通信的基本单位缩小为一个一个的帧，这些帧对应着逻辑流中的消息。并行地在同一个 TCP 连接上双向交换消息。
3. 数据流:     因为 HTTP/2 的数据包是不按顺序发送的，同一个连接里面连续的数据包，可能属于不同的回应。因此，必须要对数据包做标记，指出它属于哪个回应。HTTP/2 将每个请求或回应的所有数据包，称为一个数据流（stream）。每个数据流都有一个独一无二的编号。数据包发送的时候，都必须标记数据流ID，用来区分它属于哪个数据流。另外还规定，客户端发出的数据流，ID一律为奇数，服务器发出的，ID为偶数。数据流发送到一半的时候，客户端和服务器都可以发送信号（RST_STREAM帧），取消这个数据流。HTTP/1.1取消数据流的唯一方法，就是关闭TCP连接。这就是说，HTTP/2 可以取消某一次请求，同时保证TCP连接还打开着，可以被其他请求使用。客户端还可以指定数据流的优先级。优先级越高，服务器就会越早回应
4. 首部压缩:   HTTP 协议不带有状态，每次请求都必须附上所有信息。所以，请求的很多字段都是重复的，一模一样的内容，每次请求都必须附带，这会浪费很多带宽，也影响速度。HTTP/2 对这一点做了优化，引入了头信息压缩机制（header compression）。一方面，头信息压缩后再发送（SPDY 使用的是通用的DEFLATE 算法，而 HTTP/2 则使用了专门为首部压缩而设计的 HPACK 算法）。；另一方面，客户端和服务器同时维护一张头信息表，所有字段都会存入这个表，生成一个索引号，以后就不发送同样字段了，只发送索引号，这样就提高速度了
5. 服务端推送:  HTTP/2 允许服务器未经请求，主动向客户端发送资源，这叫做服务器推送（server push）。常见场景是客户端请求一个网页，这个网页里面包含很多静态资源。正常情况下，客户端必须收到网页后，解析HTML源码，发现有静态资源，再发出静态资源请求。其实，服务器可以预期到客户端请求网页后，很可能会再请求静态资源，所以就主动把这些静态资源随着网页一起发给客户端了。

grpc是怎样实现异步的？
grpc有四种模式， 一元RPC，服务端流RPC，客户端流RPC，双向流RPC
要实现异步，可以使用对应的异步流模式，比如服务断流RPC，客户端发送请求后，服务端将数据以流的形式异步发送即可

etcd / consul?
A服务 -> B服务 是怎样获取B的IP host等
etcd是怎样实现服务发现的?    https://juejin.cn/post/7134333726112088078
启动服务 -> 向ETCD注册服务 -> 声明租约并续约（有过期时间，需要不断续约，否则会被删除）
第一次获取服务信息 -> 创建监听，被动接收 -> 更新本地的信息







